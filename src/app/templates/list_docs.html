{% extends "base.html" %}
{% block content %}

{% if success %}
<div class="toast" id="toast">
  {% if success == 'document_created' %}
    ✓ Document created successfully!
  {% elif success == 'document_updated' %}
    ✓ Document updated successfully!
  {% elif success == 'document_deleted' %}
    ✓ Document deleted successfully!
  {% endif %}
</div>
<script>
  setTimeout(() => {
    const toast = document.getElementById('toast');
    if (toast) toast.style.display = 'none';
  }, 3000);
</script>
{% endif %}

<h2>Documents</h2>

<ul>
  {% for d in docs %}
    <li>
      <strong>{{ d.display_date }}</strong> - 
      {{ d.source }}
      —
      <a href="/documents/{{ d.id }}/edit">Edit</a>
      
      <form method="post" action="/documents/{{ d.id }}/delete" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this document?');">
        <button type="submit" class="delete-btn">Delete</button>
      </form>
    </li>
  {% endfor %}
</ul>
{% endblock %}
